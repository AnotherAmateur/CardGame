using Godot; using System; using System.Text;  public class RoomList : Control {  	public override void _Ready() 	{		 		var listContainer = GetNode<VBoxContainer>("ScrollContainer/VBoxContainer"); 		float buttonWidth = GetNode<ScrollContainer>("ScrollContainer").RectSize.x; 		float buttonHeight = 50; 			 		for (int i = 0; i < 5; i++) 		{ 			var control = new Control(); 			 			var button = new Button(); 		 			control.AddChild(button); 			control.RectMinSize = new Vector2(buttonWidth, buttonHeight); 			button.RectMinSize = new Vector2(buttonWidth, buttonHeight); 			listContainer.AddChild(control); 			button.Text = "button" + i.ToString();			 		} 		 	}   	private void _on_HTTPRequest_request_completed(int result, int response_code, string[] headers, byte[] body) 	{ 		if (response_code == 200) 		{ 			try 			{ 				JSONParseResult json = JSON.Parse(Encoding.UTF8.GetString(body)); 				if (json.Error != Error.Ok) 				{ 					throw new Exception("Unexpected server response (500)"); 				}  				GetTree().ChangeSceneTo((PackedScene)GD.Load("res://CardSelectionMenu.tscn")); 			} 			catch (Exception ex) 			{ 				GetNode<Label>("StatusLabel").Text = ex.Message; 			} 		} 		else 		{ 			GetNode<Label>("StatusLabel").Text = "Не удалось присоединиться. Код: " + response_code; 		} 	}   	private void _on_CloseButton_pressed() 	{ 		QueueFree(); 	}  }     
